<!DOCTYPE html>
<html>
<head>
    <title>Map of Universe</title>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="StyleSheet.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <script src="scripts/control-min.js"></script>
    <style>
        body, h1, h2, h3, h4, h5 {
            font-family: "Raleway", sans-serif;
        }

        centered {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        h1 {
            font-weight: bold;
            font-size: 72px;
        }

        h2 {
            font-weight: bold;
            font-size: 48px;
        }
    </style>
    <script>
        var ip = "146.169.32.119";
        var url = "http://" + ip + "/api/Script/RunMethod";
		var animate_started = false;
		var show_galaxy = true;
        function LoadScenario() {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState === 4) {
                    console.log("succesfully loaded scenario " + xmlhttp.responseText);
                    post(url,
                    { "Mod": "gdo.net.app.SigmaGraph.server", "Func": "initiateProcessing", "Params": [0, "\"MoU.graphml\""], "InstanceId": 0 }
                    );
                } else {
                    console.log("failed to load scenario " + xmlhttp.status);
                }
            }
            xmlhttp.open("GET", "http://" + ip + "/api/CaveState/Deploy?stateName=MoU", true);
            xmlhttp.send();
            Animate();
        }

        function ResetGraph() {
            post(url,
            { "Mod": "gdo.net.app.SigmaGraph.server", "Func": "resetSigmaGraph", "Params": [0], "InstanceId": 0 }
            );
        }

        function LoadLabels() {
            post(url,
            { "Mod": "gdo.net.app.SigmaGraph.server", "Func": "triggerNameVertices", "Params": [0, "\"node\"", "\"type\"", "\"function(x) {var name = x.node.attrs['name']; var type = x.node.attrs['type']; var objid = x.node.attrs['objid']; var objid_lc = new String(objid || \"\").valueOf().toLowerCase(); if (type == \"moon\" && x.node.attrs['subtype'] == \"Earth\") {return true;} if (type == \"moon\") {x.node.size=0; return false;} if (name == \"Makemake\" || name == \"Haumea\" || name == \"Eris\") {x.node.size=1; return false;} if (objid == \"2009-026B\" || objid == \"2006-001A\" || objid == \"1977-084A\" || objid == \"1977-076A\" || objid == \"2001-027A\" || objid == \"1990-037B\" || objid == \"1998-067A\") {return true;} if (name.indexOf(\"Gerasimenko\") >= 0 || name == \"Sirius\" || name == \"Canopus\" || name == \"Rigil Kentaurus\" || name == \"Altair\" || name == \"Deneb\" || name == \"Vega\" || name == \"Proxima Centauri\" || name == \"Sgr a*\") {return true;} if (objid_lc.indexOf(\"kepler-186\") >= 0 || objid_lc.indexOf(\"kepler-452\") >= 0 || objid_lc.indexOf(\"sn1572\") >= 0 || objid_lc.indexOf(\"sn1604\") >= 0 || objid_lc.indexOf(\"51 peg\") >= 0 || (objid_lc.indexOf(\"lmc\") >= 0 && type == \"galaxy\") || (objid_lc.indexOf(\"smc\") >= 0 && type == \"galaxy\") || objid_lc.indexOf(\"j1120+0641\") >= 0){x.node.attrs['name'] = objid; return true;} if (objid_lc.indexOf(\"messier031\") >= 0) {x.node.attrs['name'] = \"Andromeda\"; return true;} if (type == \"mainbody\" || type == \"Axis\") {return true;} return false;}\"", "\"#ff0000\"", "\"14\"", "\"name\""], "InstanceId": 0 }
            );
        }

        function LoadExoplanetsAndComets() {
            post(url,
            { "Mod": "gdo.net.app.SigmaGraph.server", "Func": "triggerNameVertices", "Params": [0, "\"node\"", "\"type\"", "\"function(x) {var name = x.node.attrs['name']; var type = x.node.attrs['type']; var objid = x.node.attrs['objid']; var objid_lc = new String(objid || \"\").valueOf().toLowerCase(); if (type == \"moon\" && x.node.attrs['subtype'] == \"Earth\") {return true;} if (type == \"moon\") {x.node.size=0; return false;} if (name == \"Makemake\" || name == \"Haumea\" || name == \"Eris\") {x.node.size=1; return false;} if (objid == \"2009-026B\" || objid == \"2006-001A\" || objid == \"1977-084A\" || objid == \"1977-076A\" || objid == \"2001-027A\" || objid == \"1990-037B\" || objid == \"1998-067A\") {return true;} if (name.indexOf(\"Gerasimenko\") >= 0 || name == \"Sirius\" || name == \"Canopus\" || name == \"Rigil Kentaurus\" || name == \"Altair\" || name == \"Deneb\" || name == \"Vega\" || name == \"Proxima Centauri\" || name == \"Sgr a*\") {return true;} if (objid_lc.indexOf(\"kepler-186\") >= 0 || objid_lc.indexOf(\"kepler-452\") >= 0 || objid_lc.indexOf(\"sn1572\") >= 0 || objid_lc.indexOf(\"sn1604\") >= 0 || objid_lc.indexOf(\"51 peg\") >= 0 || (objid_lc.indexOf(\"lmc\") >= 0 && type == \"galaxy\") || (objid_lc.indexOf(\"smc\") >= 0 && type == \"galaxy\") || objid_lc.indexOf(\"j1120+0641\") >= 0){x.node.attrs['name'] = objid; return true;} if (objid_lc.indexOf(\"messier031\") >= 0) {x.node.attrs['name'] = \"Andromeda\"; return true;} if (type == \"mainbody\" || type == \"Axis\" || type == \"comet\") {return true;} if (type == \"exoplanet\") {x.node.attrs['name'] = objid; return true;} return false;}\"", "\"#ff0000\"", "\"14\"", "\"name\""], "InstanceId": 0 }
            );
        }

        function LoadDateA() {
            post(url,
            { "Mod": "gdo.net.app.SigmaGraph.server", "Func": "triggerNameVertices", "Params": [0, "\"node\"", "\"type\"", "\"function(x) {var name = x.node.attrs['name']; var type = x.node.attrs['type']; var objid = x.node.attrs['objid']; var objid_lc = new String(objid || \"\").valueOf().toLowerCase(); var ddate = new Date(new String(x.node.attrs['date'] || \"2018-01-01\").valueOf()).getFullYear(); var fdate = 1846; if (ddate == 2018 && type == \"star\" && x.node.attrs['mapp'] < 6) {ddate = 1000;} if (type == \"moon\" && x.node.attrs['subtype'] == \"Earth\") {return true} if (type == \"moon\") {x.node.size=0; return false;} if (name == \"Makemake\" || name == \"Haumea\" || name == \"Eris\") {if (ddate > fdate) {x.node.size=0} else {x.node.size=1}; return false;} if (objid == \"2009-026B\" || objid == \"2006-001A\" || objid == \"1977-084A\" || objid == \"1977-076A\" || objid == \"2001-027A\" || objid == \"1990-037B\" || objid == \"1998-067A\") {if (ddate > fdate) {x.node.size=0; return false;} return true;} if (name.indexOf(\"Gerasimenko\") >= 0 || name == \"Sirius\" || name == \"Canopus\" || name == \"Rigil Kentaurus\" || name == \"Altair\" || name == \"Deneb\" || name == \"Vega\" || name == \"Proxima Centauri\" || name == \"Sgr a*\") {if (ddate > fdate) {x.node.size=0; return false;} return true;} if (objid_lc.indexOf(\"kepler-186\") >= 0 || objid_lc.indexOf(\"kepler-452\") >= 0 || objid_lc.indexOf(\"sn1572\") >= 0 || objid_lc.indexOf(\"sn1604\") >= 0 || objid_lc.indexOf(\"51 peg\") >= 0 || (objid_lc.indexOf(\"lmc\") >= 0 && type == \"galaxy\") || (objid_lc.indexOf(\"smc\") >= 0 && type == \"galaxy\") || objid_lc.indexOf(\"j1120+0641\") >= 0){if (ddate > fdate) {x.node.size=0; return false;} x.node.attrs['name'] = objid; return true;} if (objid_lc.indexOf(\"messier031\") >= 0) {if (ddate > fdate) {x.node.size=0; return false;} x.node.attrs['name'] = \"Andromeda\"; return true;} if (type == \"mainbody\" || type == \"Axis\") {return true;} if (ddate > fdate) {x.node.size=0;} return false;}\"", "\"#ff0000\"", "\"14\"", "\"name\""], "InstanceId": 0 }
            );
        }

        function LoadDateB() {
            post(url,
            { "Mod": "gdo.net.app.SigmaGraph.server", "Func": "triggerNameVertices", "Params": [0, "\"node\"", "\"type\"", "\"function(x) {var name = x.node.attrs['name']; var type = x.node.attrs['type']; var objid = x.node.attrs['objid']; var objid_lc = new String(objid || \"\").valueOf().toLowerCase(); var ddate = new Date(new String(x.node.attrs['date'] || \"2018-01-01\").valueOf()).getFullYear(); var fdate = 1957; if (ddate == 2018 && type == \"star\" && x.node.attrs['mapp'] < 6) {ddate = 1000;} if (type == \"moon\" && x.node.attrs['subtype'] == \"Earth\") {return true} if (type == \"moon\") {x.node.size=0; return false;} if (name == \"Makemake\" || name == \"Haumea\" || name == \"Eris\") {if (ddate > fdate) {x.node.size=0} else {x.node.size=1}; return false;} if (objid == \"2009-026B\" || objid == \"2006-001A\" || objid == \"1977-084A\" || objid == \"1977-076A\" || objid == \"2001-027A\" || objid == \"1990-037B\" || objid == \"1998-067A\") {if (ddate > fdate) {x.node.size=0; return false;} return true;} if (name.indexOf(\"Gerasimenko\") >= 0 || name == \"Sirius\" || name == \"Canopus\" || name == \"Rigil Kentaurus\" || name == \"Altair\" || name == \"Deneb\" || name == \"Vega\" || name == \"Proxima Centauri\" || name == \"Sgr a*\") {if (ddate > fdate) {x.node.size=0; return false;} return true;} if (objid_lc.indexOf(\"kepler-186\") >= 0 || objid_lc.indexOf(\"kepler-452\") >= 0 || objid_lc.indexOf(\"sn1572\") >= 0 || objid_lc.indexOf(\"sn1604\") >= 0 || objid_lc.indexOf(\"51 peg\") >= 0 || (objid_lc.indexOf(\"lmc\") >= 0 && type == \"galaxy\") || (objid_lc.indexOf(\"smc\") >= 0 && type == \"galaxy\") || objid_lc.indexOf(\"j1120+0641\") >= 0){if (ddate > fdate) {x.node.size=0; return false;} x.node.attrs['name'] = objid; return true;} if (objid_lc.indexOf(\"messier031\") >= 0) {if (ddate > fdate) {x.node.size=0; return false;} x.node.attrs['name'] = \"Andromeda\"; return true;} if (type == \"mainbody\" || type == \"Axis\") {return true;} if (ddate > fdate) {x.node.size=0;} return false;}\"", "\"#ff0000\"", "\"14\"", "\"name\""], "InstanceId": 0 }
            );
        }

        function LoadDateC() {
            post(url,
            { "Mod": "gdo.net.app.SigmaGraph.server", "Func": "triggerNameVertices", "Params": [0, "\"node\"", "\"type\"", "\"function(x) {var name = x.node.attrs['name']; var type = x.node.attrs['type']; var objid = x.node.attrs['objid']; var objid_lc = new String(objid || \"\").valueOf().toLowerCase(); var ddate = new Date(new String(x.node.attrs['date'] || \"2018-01-01\").valueOf()).getFullYear(); var fdate = 1990; if (ddate == 2018 && type == \"star\" && x.node.attrs['mapp'] < 6) {ddate = 1000;} if (type == \"moon\" && x.node.attrs['subtype'] == \"Earth\") {return true} if (type == \"moon\") {x.node.size=0; return false;} if (name == \"Makemake\" || name == \"Haumea\" || name == \"Eris\") {if (ddate > fdate) {x.node.size=0} else {x.node.size=1}; return false;} if (objid == \"2009-026B\" || objid == \"2006-001A\" || objid == \"1977-084A\" || objid == \"1977-076A\" || objid == \"2001-027A\" || objid == \"1990-037B\" || objid == \"1998-067A\") {if (ddate > fdate) {x.node.size=0; return false;} return true;} if (name.indexOf(\"Gerasimenko\") >= 0 || name == \"Sirius\" || name == \"Canopus\" || name == \"Rigil Kentaurus\" || name == \"Altair\" || name == \"Deneb\" || name == \"Vega\" || name == \"Proxima Centauri\" || name == \"Sgr a*\") {if (ddate > fdate) {x.node.size=0; return false;} return true;} if (objid_lc.indexOf(\"kepler-186\") >= 0 || objid_lc.indexOf(\"kepler-452\") >= 0 || objid_lc.indexOf(\"sn1572\") >= 0 || objid_lc.indexOf(\"sn1604\") >= 0 || objid_lc.indexOf(\"51 peg\") >= 0 || (objid_lc.indexOf(\"lmc\") >= 0 && type == \"galaxy\") || (objid_lc.indexOf(\"smc\") >= 0 && type == \"galaxy\") || objid_lc.indexOf(\"j1120+0641\") >= 0){if (ddate > fdate) {x.node.size=0; return false;} x.node.attrs['name'] = objid; return true;} if (objid_lc.indexOf(\"messier031\") >= 0) {if (ddate > fdate) {x.node.size=0; return false;} x.node.attrs['name'] = \"Andromeda\"; return true;} if (type == \"mainbody\" || type == \"Axis\") {return true;} if (ddate > fdate) {x.node.size=0;} return false;}\"", "\"#ff0000\"", "\"14\"", "\"name\""], "InstanceId": 0 }
            );
        }

		function Animate() {
			if (!animate_started) {
				animate_started = true;
			} else {
				return;
			}
            setInterval(function () { Animate0(); }, 1000);
            setInterval(function () { Animate1(); }, 3000);
            setInterval(function () { Animate2(); }, 500);
            setInterval(function () { Animate3(); }, 500);
		}

        function Animate0() {
			if (!show_galaxy) {
				return;
			}
            var n = parseInt($("#lcars_bg").attr('src').charAt(25), 16) + 1;
			if (n >= 14)
			{
				n = 0;
			}
            $("#lcars_bg").attr('src', 'images/backgrounds/lcars_' + n.toString(16) + '.png');
        }

		function Animate1() {
            var n = Math.floor(Math.random() * 12);
			$("#canvas1").css('background-image', "url('images/backgrounds/canvas1_" + n.toString(16) + ".png')");
        }

		function Animate2() {
            var n = Math.floor(Math.random() * 16);
			$("#canvas2").css('background-image', "url('images/backgrounds/canvas2_" + n.toString(16) + ".png')");
        }

		function Animate3() {
            var n = Math.floor(Math.random() * 14);
			$("#canvas3").css('background-image', "url('images/backgrounds/canvas3_" + n.toString(16) + ".png')");
        }

		function ModeSelect() {
		    if (show_galaxy) {
				show_galaxy = false;
				$("#lcars_bg").attr('src', 'images/backgrounds/lcars_e.png');
			} else {
				if (parseInt($("#lcars_bg").attr('src').charAt(25), 16) == 14) {
					$("#lcars_bg").attr('src', 'images/backgrounds/lcars_d.png');
				} else {
					$("#lcars_bg").attr('src', 'images/backgrounds/lcars_0.png');
					show_galaxy = true;
				}
			}
		}
    </script>
</head>
<body class="w3-light-grey">
    <div>
        <canvas id="field_of_view" style="position: absolute; z-index: 20; width: 597px; height: 193px; touch-action: none; background: #e0b8e7; left: 2844px; top: 1375px;"></canvas>
        <canvas id="canvas1" style="position: absolute; z-index: 5; width: 129px; height: 219px; touch-action: none; background-image: url('images/backgrounds/canvas1_0.png'); background-size: 129px 219px; background-position: left top; left: 2259px; top: 1357px; border-bottom: 2px solid black; border-right: 1px solid black"></canvas>
        <canvas id="canvas2" style="position: absolute; z-index: 5; width: 1505px; height: 78px; touch-action: none; background-image: url('images/backgrounds/canvas2_0.png'); background-size: 1505px 78px; background-position: left top; left: 2251px; top: 1651px; border-right: 2px solid black"></canvas>
        <canvas id="canvas3" style="position: absolute; z-index: 5; width: 136px; height: 215px; touch-action: none; background-image: url('images/backgrounds/canvas3_0.png'); background-size: 136px 215px; background-position: left top; left: 3604px; top: 1361px; border-bottom: 1px solid black; border-right: 2px solid black"></canvas>
        <!-- avoiding bouncy images by adding extra 3 canvas elements -->
        <canvas id="canvas4" style="position: absolute; z-index: 3; width: 129px; height: 219px; touch-action: none; background-image: url('images/backgrounds/canvas1_0.png'); background-size: 129px 219px; background-position: left top; left: 2259px; top: 1357px; border-bottom: 2px solid black; border-right: 1px solid black"></canvas>
        <canvas id="canvas5" style="position: absolute; z-index: 3; width: 1505px; height: 78px; touch-action: none; background-image: url('images/backgrounds/canvas2_0.png'); background-size: 1505px 78px; background-position: left top; left: 2251px; top: 1651px; border-right: 2px solid black"></canvas>
        <canvas id="canvas6" style="position: absolute; z-index: 3; width: 136px; height: 215px; touch-action: none; background-image: url('images/backgrounds/canvas3_0.png'); background-size: 136px 215px; background-position: left top; left: 3604px; top: 1361px; border-bottom: 1px solid black; border-right: 2px solid black"></canvas>
        <img id="lcars_bg" src='images/backgrounds/lcars_d.png' height="1688px" width="3824px" style="position: absolute; border-top: 211px solid black; border-bottom: 261px solid black; border-right: 16px solid black; left: 0px; top: 0px;" />
        <!-- foreground image for clickable regions -->
        <img id="lcars_fg" height="2160px" width="3840px" style="position: absolute; z-index:10; left: 0px; top: 0px;" usemap="#lcarsmap" />
        <map name="lcarsmap">
            <area shape="rect" coords="1848, 1365, 2131, 1569" href="javascript:LoadLabels();" title="Labels On" alt="Load Labels">
            <area shape="rect" coords="1462, 1365, 1644, 1422" href="javascript:LoadScenario()" title="Load Scenario" alt="Load Scenario">
            <area shape="rect" coords="1462, 1450, 1644, 1569" href="javascript:ResetGraph()" title="Reset" alt="Reset">
            <area shape="rect" coords="3459, 1419, 3526, 1568" href="javascript:ModeSelect()" title="Mode Select" alt="Mode Select">
            <area shape="rect" coords="2266, 1365, 2380, 1399" href="javascript:LoadExoplanetsAndComets();" title="Show Exoplanets and Coments" alt="Load Exoplanets and Comets">
            <area shape="rect" coords="2266, 1405, 2380, 1440" href="javascript:LoadDateA();" title="1846" alt="Load Date A">
            <area shape="rect" coords="2266, 1447, 2380, 1483" href="javascript:LoadDateB();" title="1957" alt="Load Date B">
            <area shape="rect" coords="2266, 1489, 2380, 1525" href="javascript:LoadDateC();" title="1990" alt="Load Date C">
        </map>
    </div>
</body>
</html>
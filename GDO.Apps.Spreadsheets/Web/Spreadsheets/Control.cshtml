@using System.IO
@using System.Net.Mime
@using System.Web.Helpers
@using GDO.Core
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Bootstrap Core CSS -->
    <link href="../../Bootstrap/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- MetisMenu CSS -->
    <link href="../../Bootstrap/bower_components/metisMenu/dist/metisMenu.css" rel="stylesheet">
    <!-- Timeline CSS -->
    <link href="../../Bootstrap/dist/css/timeline.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../Bootstrap/dist/css/sb-admin-2.css" rel="stylesheet">
    <!-- Morris Charts CSS -->
    <link href="../../Bootstrap/bower_components/morrisjs/morris.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="../../Bootstrap/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <style>
        body { color: #FFF; }

        .unselectable {
            -moz-user-select: -moz-none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            -o-user-select: none;
            user-select: none;
        }

        .btn-file {
            position: relative;
            overflow: hidden;
            background-color: #2a9fd6 !important;
        }

        .btn-file input[type=file] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            font-size: 100px;
            text-align: right;
            filter: alpha(opacity=0);
            opacity: 0;
            cursor: inherit;
            display: block;
        }

        input[readonly] {
            background-color: #2a9fd6 !important;
            cursor: text !important;
        }

        .file_upload input.upload {
            position: absolute;
            top: 0;
            right: 0;
            margin: 0;
            padding: 0;
            cursor: pointer;
            opacity: 0;
            filter: alpha(opacity=0);
        }

        .btn-group .btn{
            background-color: #2a9fd6 !important;
        }

        .btn-group .btn-danger{
            background-color: #ff0000 !important;
        }

        .btn:hover, .btn:focus{
            background-color: #333 !important;
        }

        .input_field_div {
            margin: 0px;
            padding: 0px;
        }

        label {
            font-weight: normal !important;
        }

        .input_field {
            width: 100%;
            height: 40px;
            border: 1px solid #333;
            background: #333;
            color: #2a9fd6;
            padding: 0px;
            display: inline-block;
            position: relative;
            text-align: center;
        }

        .node {
          cursor: pointer;
        }

        .node circle {
          fill: #fff;
          stroke: steelblue;
          stroke-width: 1.5px;
        }

        .node text {
          font: 14px sans-serif;
        }

        .link {
          fill: none;
          stroke: #ccc;
          stroke-width: 1.5px;
        }
    </style>
</head>
<body unselectable="on" class="unselectable">
<script src="../../Scripts/jquery-2.1.4.min.js"></script>
<script src="../../Scripts/d3/d3.min.js"></script>
<script src="../../Scripts/jquery.signalR-2.2.1.min.js"></script>
<script src="../../Scripts/jquery.csv-0.71.min.js"></script>
<script src="../../Bootstrap/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../../Bootstrap/dist/js/sb-admin-2.js"></script>
<script src="../../Bootstrap/bower_components/metisMenu/dist/metisMenu.min.js"></script>
<script>
    $(function() {
        var gdo = parent.gdo;
        gdo.net.app["Spreadsheets"].initControl();
        $(document).on('change', '.btn-file :file', function() {
            var input = $(this),
                numFiles = input.get(0).files ? input.get(0).files.length : 1,
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
            input.trigger('fileselect', [numFiles, label]);
        });
        $(document).ready(function() {
            $('.btn-file :file').on('fileselect', function(event, numFiles, label) {
                var id = '#filename-' + event.target.id;
                if (label === "" || label === undefined) {
                    $(id).text('No file Selected');
                } else {
                    $(id).text(label);
                }

            });
        });
    });
</script>
<div class="wrapper" style="width: 97%">
    <div class="row">
        <div class="col-lg-3" style="width:100%">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h6><i class='fa  fa-comment-o  fa-fw'></i>&nbsp;Upload</h6>
                </div>
                <div class="panel-body">
                    <form id="file_upload_form" action="http://146.169.32.111/File/Upload" method="post" data-ajax="false" enctype="multipart/form-data">
                    <table style="border-collapse: separate; border-spacing: 3px; background-color: transparent;">
                        <tr>
                            <td>
                                <div style="background-color: transparent">
                                    <h6>Upload Spreadsheet File:</h6>
                                </div>
                            </td>
                            <td>
                                <div class="fileinput fileinput-new" data-provides="fileinput">
                                    <span class="btn btn-file btn-default"><span>Choose file</span><input id="sheet" name="files" type="file" accept=".xls,.xlsx,.xlsm" /></span>
                                    <span class="fileinput-filename"></span><span id="filename-sheet" class="fileinput-new">No file chosen</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div style="background-color: transparent">
                                    <h6>Upload Variables:</h6>
                                </div>
                            </td>
                            <td>
                                <div class="fileinput fileinput-new" data-provides="fileinput">
                                    <span class="btn btn-file btn-default"><span>Choose file</span><input id="var" name="files" type="file" accept=".xls,.xlsx" /></span>
                                    <span class="fileinput-filename"></span><span id="filename-var" class="fileinput-new">No file chosen</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div style="background-color: transparent">
                                    <h6>Uploaded Files:</h6>
                                </div>
                            </td>
                            <td>
                                <span id="uploaded_files">None</span>
                            </td>
                        </tr>
                    </table>
                    </form>
                </div>
                <div class="panel-footer">
                    <fieldset>
                        <button id="spreadsheet_submit" class="btn btn-success btn-circle btn-xl center-block format_button ">
                            <i class='fa  fa-check fa-fw'></i>
                        </button>
                    </fieldset>
                </div>
            </div>
            <div class="panel panel-primary" id="operation">
                <div class="panel-heading">
                    <h6><i class='fa  fa-comment-o  fa-fw'></i>&nbsp;Operations</h6>
                </div>
                <div class="panel-body">
                    <table style="border-collapse: separate; border-spacing: 3px; background-color: transparent;">
                        <tr>
                            <td>
                                <div class="btn-group" role="group" aria-label="...">
                                    <button id="view_model" type="button" class="btn">View Model</button>
                                    <button id="unfold_model" type="button" class="btn">Unfold Model</button>
                                    <button id="analysis" type="button" class="btn">Analysis</button>
                                    <button id="link_outputs" type="button" class="btn">Link Outputs</button>
                                    <button id="genetic_algorithm" type="button" class="btn">Genetic Algorithm</button>
                                </div>
                            </td>
                            <td>
                                <div class="btn-group" role="group" aria-label="...">
                                    <button id="clear_model" type="button" class="btn btn-danger">Clear Model</button>
                                    <button id="clear_server" type="button" class="btn btn-danger">Clear Server</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div id="results">
                                    <div id="view_model_result">
                                        <link rel="stylesheet" type="text/css" media="screen" href="../../Web/Spreadsheets/ui.jqgrid-bootstrap.css"/>
                                        <link rel="stylesheet" type="text/css" media="screen" href="../../Web/Spreadsheets/ui.jqgrid.css"/>
                                        <link rel="stylesheet" type="text/css" media="screen" href="../../Web/Spreadsheets/bootstrap-switch.min.css" />
                                        <p id="view_model_message"></p>
                                        <table id="view_model_grid"></table>
                                        <div id="view_model_pager"></div>
                                    </div>
                                    <div id="unfold_model_result">
                                        <h6 id="unfold_model_message"></h6>
                                        <form role="form" id="packing_detail_form">
                                            <div class="form-inline">
                                                <h6>Packing Type Heuristic</h6>
                                                <select class="form-control" name="packHeuristic">
                                                    <option value="0">Best Short Side Fit</option>
                                                    <option value="1">Best Long Side Fit</option>
                                                    <option value="2">Best Area Fit</option>
                                                    <option value="3">Bottom Left Contact Rule</option>
                                                    <option value="4">Contact Point Minimising Rule</option>
                                                </select>
                                            </div>
                                            <br/>
                                            <button id="submit_packing_data" type="button" class="btn btn-success">Start Unfolding With Heuristic</button>
                                        </form>
                                        <div id="trace_precedent_section"></div>
                                    </div>
                                    <div id="analysis_result"></div>
                                    <div id="link_result"></div>
                                    <div id="genetic_algorithm_result">
                                        <form role="form" id="output_definition_form">
                                        </form>
                                        <button id="submit_genetic_algorithm" type="button" class="btn btn-success">Run Genetic Algorithm</button>
                                        <div id="gaSheetManipulation"></div>
                                        <div id="original_outputs"></div>
                                        <div id="genetic_algorithm_message"></div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div id="unfoldingMap"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div id="formula_tree"></div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
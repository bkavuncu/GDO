@using System.Threading.Tasks
@using GDO.Core
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>GDO Management Panel</title>
    <style>
        #page td {
            padding: 0;
            margin: 0;
        }

        #page {
            border-collapse: collapse;
        }

        body {
            margin: 0 auto;
            padding: 0;
            border: 0;
            background-color: #000;
            color: #222;
            font-family: helvetica;
            font-size: 100%;
            width: 100%;
        }

        .unselectable {
            -moz-user-select: -moz-none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            -o-user-select: none;
            user-select: none;
        }

        .cell {
            margin: 10px;
        }

        #header {
            margin: 0;
            padding: 0;
            border: 0;
            width: 100%;
            background-color: #000;
            color: #DDD;
            z-index: 10;
            font-size: 140%;
            width: 100%;
        }

        #header-text {
            width: 100%;
            background-color: #222;
            font-size: 140%;
        }

        #divider {
            border: 2px solid #444;
            background-color: #444;
        }

        #content {
            margin: auto;
            padding: 15px;
            border: 0;
            background-color: #000;
            color: #FFF;
            font-family: helvetica;
            font-size: 100%;
            width: 100%;
        }

        #app_frame {
            width: 100%;
            height: 100%;
            border: 0 none;
            z-index: 9;
        }

        iframe {
            border: 0 none;
            width: 99%;
            height: 99%;
            display: block;
        }

        #instance_table_app_list_ {
            height: 200px;
            overflow-y: hidden;
        }
    </style>
    <script>
        var gdo = {};
        gdo.net = {};
        gdo.management = {};
        gdo.maintenance = {};
        gdo.node = {};
        gdo.fs = {};
        gdo.net.peer = {};
        gdo.net.node = [];
        gdo.net.section = [];
        gdo.net.app = [];
        gdo.net.apps = {}
        gdo.net.instance = [];
        gdo.net.nodes = {};
        gdo.net.neighbour = {};
        @{
            foreach (KeyValuePair<string, App> appEntry in Cave.Apps)
            {
                @:gdo.net.app["@appEntry.Value.Name"] = {};
                @:gdo.net.app["@appEntry.Value.Name"].name = "@appEntry.Value.Name";
                @:gdo.@appEntry.Value.Name = {};
            }
            @: var a ={}
        }
    </script>
</head>
<body unselectable="on" class="unselectable">
    <script src="../Scripts/jquery-2.1.4.min.js"></script>
    <script src="../Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script type="text/javascript" src="../Scripts/gdo.js"></script>
    <script src="../signalr/hubs"></script>
    <script type="text/javascript" src="../Scripts/peer.js"></script>
    <script>
        $(function() {
            @{
                foreach (KeyValuePair<string, App> appEntry in Cave.Apps)
                {
                    @:gdo.loadModule("@appEntry.Value.Name","@appEntry.Value.Name", gdo.MODULE_TYPE.APP);
                }
            }
            gdo.loadModule('management', 'management', gdo.MODULE_TYPE.CORE);
            $( document ).ready(function() {
                gdo.initGDO(gdo.CLIENT_MODE.CONTROL);
            });
        });
        window.onerror = function(errorMsg, url, lineNumber, column, errorObj) {
            //var space = "<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
            var space = "<br /> ";
            gdo.consoleOut("", 5, errorMsg + space + 'Script: ' + url + space + 'Line: ' + lineNumber
                + space + 'Column: ' + column + space + 'StackTrace: ' + errorObj);
        }
        initApp = function() {
            gdo.consoleOut('', 1, 'GDO Initialized');
            gdo.management.drawEmptyNodeTable(gdo.net.cols, gdo.net.rows);
            gdo.management.drawEmptySectionTable(gdo.net.cols, gdo.net.rows);
            gdo.management.drawEmptyButtonTable(6, 1);
            gdo.updateSelf();
        }
    </script>
    <div id="header" unselectable="on" class="unselectable">
        <table id="header_table" unselectable="on" class="unselectable" style="width: 100%;"></table>
    </div>
    <div id="divider"></div>
    <div id="content" style="align: center" unselectable="on" class="unselectable">
        <br>
        <table id="selected_node" style="width: 99%">
            <tr>
                <td id="selected_node_id"><b>Node Id:</b></td>
                <td id="selected_node_col"><b>Col:</b></td>
                <td id="selected_node_row"><b>Row:</b></td>
                <td id="selected_node_sid"><b>Section Id:</b></td>
                <td id="selected_node_scol"><b>Section Col:</b></td>
                <td id="selected_node_srow"><b>Section Row:</b></td>
                <td id="selected_node_cid"><b>Connection Id:</b></td>
                <td id="selected_node_pid"><b>Peer Id:</b></td>
                <td id="selected_node_h"><b>Node Health:</b></td>
            </tr>
        </table>
        <br>
        <table id="node_table" unselectable="on" class="unselectable" style="width: 100%"></table>
        <div id="node_table_space"><br>
        </div>
        <div id="console_area" style="width: 99.5%; height: 430px; overflow-y: scroll; border: 4px solid #444; background-color: #222; color: #FFF"></div>
        <div id="console_area_space"><br>
        </div>
        <table id="app_table" unselectable="on" class="unselectable" style="width: 100%">
            <tr>
                <td id="app_table_select_app"></td>
                <td id="app_table_app_list"><table id="app_table_app_table" unselectable="on" class="unselectable" style="width: 100%; vertical-align: top"></table></td>
                <td id="app_table_select_configuration"></td>
                <td id="app_table_configuration_list"><table id="app_table_configuration_table" unselectable="on" class="unselectable" style="width: 100%; vertical-align: top"></table></td>
                <td id="app_table_deploy_button"></td>
            </tr>
        </table>
        <div id="app_table_space"><br>
        </div>
        <table id="instance_table" cellspacing="0" cellpadding="0" unselectable="on" class="unselectable" style="width: 100%; overflow: hidden">
            <tr>
                <td id="instance_table_app_list">
                    <div instance_table_app_div><table id="instance_table_app_table" cellspacing="0" cellpadding="0" unselectable="on" class="unselectable" style="width: 100%; vertical-align: top"></table>
                    </div></td>
                <td id="instance_table_control_frame">
                    <div id="control_frame"><iframe id="control_frame_content" name="control_frame_content" width="100%" height="100%"></iframe>
                    </div></td>
            </tr>
        </table>
        <div id="instance_table_space"><br><br>
        </div>
        <table id="section_table" unselectable="on" class="unselectable" style="width: 100%"></table>
        <div id="section_table_space"><br>
        </div>
        <table id="button_table" unselectable="on" class="unselectable" style="width: 100%"></table>
    </div>
</body>
</html>
